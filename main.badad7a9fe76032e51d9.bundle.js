(()=>{"use strict";var t,e={1440:(t,e,s)=>{var i=s(2260),a=s(2511);const n={startTerrainHeight:.5,slopeAmplitude:200,slopeLengthRange:[375,750],slopeDetail:64,layers:[{color:13165035,width:5},{color:6065609,width:22},{color:2243451,width:10},{color:2960428,width:5},{color:3813938,width:250}]};class o{constructor(t,e,s=n){this.yOffset=0,this.scene=t,this.b2Physics=e,this.config=s;const i=Math.floor(1.5*s.slopeLengthRange[1]);this.pointsPool=[];for(let t=0;t<i;t++)this.pointsPool.push({x:0,y:0});this.vec2Pool=[];for(let t=0;t<i;t++)this.vec2Pool.push(new a.b2Vec2(0,0));this.chunks=[this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics()],this.terrainBody=this.b2Physics.world.CreateBody(),this.slopeStart=new Phaser.Math.Vector2(0,0),this.update()}interpolate(t,e,s){let i=.5*(1-Math.cos(s*Math.PI));return t*(1-i)+e*i}update(){const{zoom:t,width:e,worldView:s}=this.scene.cameras.main;for(;this.slopeStart.x<s.x+e+1/t*500;)console.time("TerrainSimple#generateSlope()"),this.updateChunk(),console.timeEnd("TerrainSimple#generateSlope()")}updateChunk(){const t=[],e=[],{slopeDetail:s}=this.config,i=this.b2Physics.worldScale;let o=new Phaser.Math.Vector2(0,this.slopeStart.y),r=Phaser.Math.Between(n.slopeLengthRange[0],n.slopeLengthRange[1]);r=Math.round(r/s)*s,this.yOffset+=r>.8*this.config.slopeLengthRange[1]?.2:.05;const h=(this.config.slopeLengthRange[1],.75);let c,l,d=0===this.slopeStart.x?{x:o.x+1.5*n.slopeLengthRange[1],y:0}:{x:o.x+r,y:Math.random()*h+this.yOffset},y=0,g=0;const{startTerrainHeight:p,slopeAmplitude:u}=this.config,m=this.scene.cameras.main.height*p,b=d.x-o.x,w=this.slopeStart.x;for(;y<=d.x;){let a=m+this.interpolate(o.y,d.y,(y-o.x)/b)*u;c=this.pointsPool[g],c.x=y+w,c.y=a,t.push(c),l=this.vec2Pool[g],l.x=c.x/i,l.y=c.y/i,e.push(l),y+=s,g++}const S=new a.b2ChainShape;S.CreateChain(e,e.length,e[0],e[e.length-1]);const f={shape:S,density:0,friction:0};this.terrainBody.CreateFixture(f);const x=this.chunks.shift();if(!x)return;this.chunks.push(x),x.clear();const C=t.length,P=Math.max(t[0].y,t[C-1].y)+2*this.scene.cameras.main.height;let A=0;t.push({x:t[C-1].x,y:P},{x:w,y:P});for(const{color:e,width:s}of this.config.layers)x.translateCanvas(0,A),x.fillStyle(e),x.fillPoints(t,!0,!0),x.translateCanvas(0,0),A=s;this.slopeStart.x+=y-s,this.slopeStart.y=d.y}}class r{constructor(t,e,s={x:.5,y:.5},n=!1){this.rawRayDirection=new a.b2Vec2(0,1),this.rawCrashRayDirection=new a.b2Vec2(1),this.rayCastResult={hit:!1,point:null,normal:null,fraction:-1,lastHitTime:-1},this.rayDirection=new i.Math.Vector2(0,0),this.pointStart=new a.b2Vec2(0,0),this.pointEnd=new a.b2Vec2(0,0),this.body=t,this.snowman=e,this.world=e.b2Physics.world,this.scene=e.scene,this.rayLength=s,n&&(this.rayCastCrashResult={hit:!1,point:null,normal:null,fraction:-1,lastHitTime:-1})}update(){this.reset(),this.body.GetWorldVector(this.rawRayDirection,this.rayDirection).multiply(this.rayLength),this.body.GetWorldPoint(a.b2Vec2.ZERO,this.pointStart),this.body.GetWorldPoint(this.rayDirection,this.pointEnd),this.world.RayCast(this.pointStart,this.pointEnd,this.callback.bind(this)),this.rayCastCrashResult&&(this.body.GetWorldVector(this.rawCrashRayDirection,this.rayDirection).multiply(this.rayLength),this.body.GetWorldPoint(this.rayDirection,this.pointEnd),this.world.RayCast(this.pointStart,this.pointEnd,this.callbackCrash.bind(this)))}callback(t,e,s,i){return this.rayCastResult.hit=!0,this.rayCastResult.point=e,this.rayCastResult.normal=s,this.rayCastResult.fraction=i,this.rayCastResult.lastHitTime=this.scene.game.getTime(),i}callbackCrash(t,e,s,i){if(this.rayCastCrashResult)return this.rayCastCrashResult.hit=!0,this.rayCastCrashResult.point=e,this.rayCastCrashResult.normal=s,this.rayCastCrashResult.fraction=i,this.rayCastCrashResult.lastHitTime=this.scene.game.getTime(),i}reset(){this.rayCastResult.hit=!1,this.rayCastResult.point=null,this.rayCastResult.normal=null,this.rayCastResult.fraction=-1,this.rayCastCrashResult&&(this.rayCastCrashResult.hit=!1,this.rayCastCrashResult.point=null,this.rayCastCrashResult.normal=null,this.rayCastCrashResult.fraction=-1)}}class h{constructor(t,e){this.isCrashed=!1,this.boostForce=27.5,this.jumpForce=300,this.boostVector=new a.b2Vec2(0,0),this.jumpVector=new a.b2Vec2(0,0),this.legMinLength=25,this.legMaxLength=40,this.crashIgnoredBodies=[],this.board={numSegments:10,segmentLength:8.4,segmentThickness:3.375,segments:[]},this.scene=t,this.b2Physics=e,this.cursors=this.scene.input.keyboard.createCursorKeys(),this.generateSnowboard(250,50),this.generateSnowmanBody(250,50)}update(){var t;if(this.board.segments.forEach((t=>t.update())),this.isCrashed&&this.detachBoard(),this.lostHead&&this.detachHead(),this.getTimeInAir()>100&&this.resetLegs(),null===(t=this.scene.input.activePointer)||void 0===t?void 0:t.isDown){const t=this.scene.input.activePointer;t.motionFactor=.2,this.scene.input.activePointer.x<this.scene.cameras.main.width/2?this.leanBackward():this.leanForward(),t.velocity.y<-30&&this.scene.game.getTime()-t.moveTime<=300&&this.jump()}else this.scene.input.activePointer.motionFactor=.8;this.cursors.up.isDown&&this.scene.game.getTime()-this.cursors.up.timeDown<=300&&this.jump(),this.cursors.left.isDown&&this.leanBackward(),this.cursors.right.isDown&&this.leanForward(),this.cursors.down.isDown&&this.leanCenter(),!this.isCrashed&&this.boost()}getTimeInAir(){if(this.board.segments.some((t=>t.rayCastResult.hit)))return-1;const t=Math.max(...this.board.segments.map((t=>t.rayCastResult.lastHitTime)));return this.scene.game.getTime()-t}isInAir(){return-1!==this.getTimeInAir()}detachBoard(){this.bindingJointLeft&&this.b2Physics.world.DestroyJoint(this.bindingJointLeft),this.bindingJointRight&&this.b2Physics.world.DestroyJoint(this.bindingJointRight),this.jointDistLeft&&this.b2Physics.world.DestroyJoint(this.jointDistLeft),this.jointDistRight&&this.b2Physics.world.DestroyJoint(this.jointDistRight),this.jointDistRight&&this.board.segments[this.board.segments.length-1].body.SetLinearVelocity(a.b2Vec2.ZERO)}detachHead(){this.neckJoint&&this.b2Physics.world.DestroyJoint(this.neckJoint),this.neckJoint=null}boost(){const t=this.isInAir()?.6:.9,e=this.boostVector;e.Set(this.boostForce*t,0),this.board.segments&&this.board.segments[4].body.ApplyForceToCenter(e,!0),this.body.ApplyForceToCenter(e,!0)}resetLegs(){this.setDistanceLegs(20,25)}leanBackward(){this.body.ApplyAngularImpulse(this.isInAir()?-3:-5),this.setDistanceLegs(22.5,40)}leanForward(){this.body.ApplyAngularImpulse(this.isInAir()?3:5),this.setDistanceLegs(40,22.5)}leanCenter(){this.body.ApplyForceToCenter(new a.b2Vec2(0,10)),this.setDistanceLegs(25,25)}jump(){this.setDistanceLegs(40,40);const t=this.board.segments.map((t=>t.rayCastResult.hit)),e=t[0],s=t[t.length-1],i=t[4]||t[5]||t[6],a=i?.6:1,n=this.jumpVector;n.Set(this.boostForce*a,0),e&&!s?n.y=-this.jumpForce*a:s&&!e?this.body.GetWorldVector({x:0,y:-this.jumpForce*a},n):i&&(n.y=-this.jumpForce/2.8),this.body.ApplyForceToCenter(n,!0)}setDistanceLegs(t,e){if(this.jointDistLeft){const e=t/this.b2Physics.worldScale*.6;this.jointDistLeft.SetMinLength(this.legMinLength/this.b2Physics.worldScale*.6),this.jointDistLeft.SetMaxLength(this.legMaxLength/this.b2Physics.worldScale*.6),this.jointDistLeft.SetLength(e)}if(this.jointDistRight){const t=e/this.b2Physics.worldScale*.6;this.jointDistRight.SetMinLength(this.legMinLength/this.b2Physics.worldScale*.6),this.jointDistRight.SetMaxLength(this.legMaxLength/this.b2Physics.worldScale*.6),this.jointDistRight.SetLength(t)}}generateSnowboard(t,e){const{numSegments:s,segmentLength:i,segmentThickness:n}=this.board;for(let s=1;s<=this.board.numSegments;s++){const a=this.b2Physics.createBox(t+i*s,e,0,i,n,!0,13973086);this.board.segments.push(new r(a,this,{x:.5,y:.5},s===this.board.numSegments))}this.board.nose=this.board.segments[this.board.segments.length-1],this.board.leftBinding=this.board.segments[3].body,this.board.rightBinding=this.board.segments[6].body;const o=[{dampingRatio:.5,frequencyHz:6,referenceAngle:-.35},{dampingRatio:.5,frequencyHz:6,referenceAngle:-.25},{dampingRatio:.5,frequencyHz:7,referenceAngle:-.05},{dampingRatio:.5,frequencyHz:8,referenceAngle:-.025},{dampingRatio:.5,frequencyHz:10,referenceAngle:0},{dampingRatio:.5,frequencyHz:8,referenceAngle:-.025},{dampingRatio:.5,frequencyHz:7,referenceAngle:-.05},{dampingRatio:.5,frequencyHz:6,referenceAngle:-.25},{dampingRatio:.5,frequencyHz:6,referenceAngle:-.35}];for(let n=0;n<s-1;n++){const[s,r]=this.board.segments.slice(n,n+2),h=new a.b2Vec2((t+i/2+i*(n+1))/this.b2Physics.worldScale,e/this.b2Physics.worldScale),{dampingRatio:c,frequencyHz:l,referenceAngle:d}=o[n],y=new a.b2WeldJointDef;y.Initialize(s.body,r.body,h),y.referenceAngle=d,a.b2AngularStiffness(y,l,c,y.bodyA,y.bodyB),this.b2Physics.world.CreateJoint(y)}}generateSnowmanBody(t,e){if(!this.board.leftBinding||!this.board.rightBinding)return;const s=this.b2Physics.worldScale,n=.7*s,o=.7*s,r=.3*s,h=.5,c=o,l=r,d=new a.b2Vec2(t+this.board.segmentLength*(this.board.numSegments/2+h),e-2*s-s/2),y=this.b2Physics.createCircle(d.x,d.y-s-n,0,n,{color:13165035,type:a.b2BodyType.b2_dynamicBody,linearDamping:.15,angularDamping:.15});this.body=this.b2Physics.createCircle(d.x,d.y,0,s,{color:13165035,type:a.b2BodyType.b2_dynamicBody,linearDamping:.15,angularDamping:.15}),this.crashIgnoredBodies.push(this.body);const g=new i.Math.Vector2(0,-1).multiply({x:0,y:s}).add(d);this.neckJoint=this.b2Physics.createRevoluteJoint({bodyA:this.body,bodyB:y,anchor:g,lowerAngle:-.25,upperAngle:.25,enableLimit:!0}),this.b2Physics.on("post-solve",((t,e)=>{var s;if(this.isCrashed&&this.lostHead)return;const i=t.GetFixtureA().GetBody(),a=t.GetFixtureB().GetBody();if(this.crashIgnoredBodies.includes(i)||this.crashIgnoredBodies.includes(a))return;const n=this.board.nose;i===y||a===y?Math.max(...e.normalImpulses)>7&&(this.lostHead=!0,this.isCrashed=!0):!n||i!==n.body&&a!==n.body||Math.max(...e.normalImpulses)>7&&(null===(s=n.rayCastCrashResult)||void 0===s?void 0:s.hit)&&(this.isCrashed=!0)}));const p=s+o/1.75,u=new i.Math.Vector2(0,1).rotate(h).multiply({x:p,y:p}).add(d),m=this.b2Physics.createBox(u.x,u.y,h,r,o,!0),b=new i.Math.Vector2(0,1).rotate(h).multiply({x:s,y:s}).add(d);this.b2Physics.createRevoluteJoint({bodyA:this.body,bodyB:m,anchor:b,lowerAngle:-.2,upperAngle:1,enableLimit:!0});const w=new i.Math.Vector2(0,1).rotate(.25).multiply({x:o,y:o}).add(u),S=this.b2Physics.createBox(w.x,w.y,0,r,o,!0),f=new i.Math.Vector2(w.x,w.y).add({x:0,y:-o/2});this.b2Physics.createRevoluteJoint({bodyA:m,bodyB:S,anchor:f,lowerAngle:-1.5,upperAngle:.375,enableLimit:!0});const x=new i.Math.Vector2(w).add({x:0,y:o/2});this.bindingJointLeft=this.b2Physics.createRevoluteJoint({bodyA:S,bodyB:this.board.leftBinding,anchor:x});const C=s+o/1.75,P=new i.Math.Vector2(0,1).rotate(-.5).multiply({x:C,y:C}).add(d),A=this.b2Physics.createBox(P.x,P.y,-.5,r,o,!0),R=new i.Math.Vector2(0,1).rotate(-.5).multiply({x:s,y:s}).add(d);this.b2Physics.createRevoluteJoint({bodyA:this.body,bodyB:A,anchor:R,lowerAngle:-1,upperAngle:.2,enableLimit:!0});const B=new i.Math.Vector2(0,1).rotate(-.25).multiply({x:o,y:o}).add(P),D=this.b2Physics.createBox(B.x,B.y,0,r,o,!0),v=new i.Math.Vector2(B.x,B.y).add({x:0,y:-o/2});this.b2Physics.createRevoluteJoint({bodyA:A,bodyB:D,anchor:v,lowerAngle:-.375,upperAngle:1.5,enableLimit:!0});const L=new i.Math.Vector2(B).add({x:0,y:o/2});this.bindingJointRight=this.b2Physics.createRevoluteJoint({bodyA:D,bodyB:this.board.rightBinding,anchor:L});const M={length:this.legMinLength,frequencyHz:8,dampingRatio:5};this.jointDistLeft=this.b2Physics.createDistanceJoint(this.body,this.board.rightBinding,b,x,M),this.jointDistRight=this.b2Physics.createDistanceJoint(this.body,this.board.leftBinding,R,L,M);const T=Math.PI/180*90,V=.5,F=s+c/1.75,k=new i.Math.Vector2(-1,0).rotate(V).multiply({x:F,y:F}).add(d),G=new i.Math.Vector2(-1,0).rotate(V).multiply({x:s,y:s}).add(d),J=this.b2Physics.createBox(k.x,k.y,T+V,l,c,!0);this.b2Physics.createRevoluteJoint({bodyA:this.body,bodyB:J,anchor:G,lowerAngle:-1.25,upperAngle:.75,enableLimit:!0});const I=new i.Math.Vector2(-1,0).rotate(V).multiply({x:c,y:c}).add(k),O=this.b2Physics.createBox(I.x,I.y,T+V,l,c,!0),j=new i.Math.Vector2(I).add(new i.Math.Vector2(c/2,0).rotate(V));this.b2Physics.createRevoluteJoint({bodyA:J,bodyB:O,anchor:j,lowerAngle:-.75,upperAngle:.75,enableLimit:!0}),this.crashIgnoredBodies.push(O);const H=-Math.PI/180*90,_=-.5,E=s+c/1.75,z=new i.Math.Vector2(1,0).rotate(_).multiply({x:E,y:E}).add(d),q=new i.Math.Vector2(1,0).rotate(_).multiply({x:s,y:s}).add(d),W=this.b2Physics.createBox(z.x,z.y,H+_,l,c,!0);this.b2Physics.createRevoluteJoint({bodyA:this.body,bodyB:W,anchor:q,lowerAngle:-.75,upperAngle:1.25,enableLimit:!0});const K=new i.Math.Vector2(1,0).rotate(_).multiply({x:c,y:c}).add(z),Z=this.b2Physics.createBox(K.x,K.y,H+_,l,c,!0),N=new i.Math.Vector2(K).add(new i.Math.Vector2(-c/2,0).rotate(_));this.b2Physics.createRevoluteJoint({bodyA:W,bodyB:Z,anchor:N,lowerAngle:-.75,upperAngle:.75,enableLimit:!0}),this.crashIgnoredBodies.push(Z)}}class c extends Phaser.Events.EventEmitter{constructor(t,e,s){super(),this.textureKeys=new Set,this.ZERO=new a.b2Vec2(0,0),this.scene=t,this.worldScale=e,this.world=a.b2World.Create(s),this.world.SetContactListener({BeginContact:this.BeginContact.bind(this),EndContact:this.EndContact.bind(this),PreSolve:this.PreSolve.bind(this),PostSolve:this.PostSolve.bind(this)}),this.world.SetAllowSleeping(!1),this.world.SetWarmStarting(!0),this.userDataGraphics=t.add.graphics()}createBox(t,e,s,i,n,o,r=11962192){const h=new a.b2PolygonShape;h.SetAsBox(i/2/this.worldScale,n/2/this.worldScale);const c={shape:h,density:.1,friction:.001,restitution:.005},l=this.world.CreateBody({awake:!0,position:{x:t/this.worldScale,y:e/this.worldScale},angle:s,linearDamping:.15,angularDamping:.1,type:o?a.b2BodyType.b2_dynamicBody:a.b2BodyType.b2_staticBody});l.CreateFixture(c),l.SetMassData({mass:.5,center:new a.b2Vec2,I:1});let d=this.scene.add.graphics();d.fillStyle(r),d.fillRect(-i/2,-n/2,2*i,2*n);const y=`box-${i}-${n}-${r}`;this.textureKeys.has(y)||(this.textureKeys.add(y),d.generateTexture(y,i,n));const g=this.scene.add.image(t,e,y);return l.SetUserData(g),l}createCircle(t,e,s,i,n={}){const o=new a.b2CircleShape;o.m_radius=i/this.worldScale;const r={shape:o,density:1,friction:.001,restitution:.005},h=this.world.CreateBody({position:{x:t/this.worldScale,y:e/this.worldScale},angle:s,linearDamping:n.linearDamping,angularDamping:n.angularDamping,type:n.type});h.CreateFixture(r),h.SetMassData({mass:1,center:this.ZERO,I:1}),this.userDataGraphics.clear(),this.userDataGraphics.fillStyle(n.color||3355443),this.userDataGraphics.fillCircle(i,i,i);const c=`circle-${i}-${n.color||3355443}`;this.textureKeys.has(c)||(this.textureKeys.add(c),this.userDataGraphics.generateTexture(c,2*i,2*i));const l=this.scene.add.image(t,e,c);return h.SetUserData(l),h}createRevoluteJoint(t){const e=new a.b2RevoluteJointDef,s=new a.b2Vec2(t.anchor.x/this.worldScale,t.anchor.y/this.worldScale);return e.Initialize(t.bodyA,t.bodyB,s),e.collideConnected=!1,t.lowerAngle&&(e.lowerAngle=t.lowerAngle),t.upperAngle&&(e.upperAngle=t.upperAngle),t.enableLimit&&(e.enableLimit=t.enableLimit),this.world.CreateJoint(e)}createDistanceJoint(t,e,s,i,n={}){const o=new a.b2DistanceJointDef,r=this.worldScale;o.Initialize(t,e,{x:s.x/r,y:s.y/r},{x:i.x/r,y:i.y/r}),o.collideConnected=!0;const h=n.length?n.length/this.worldScale:0;return o.length=h,o.minLength=h,o.maxLength=h,a.b2AngularStiffness(o,n.frequencyHz||15,n.dampingRatio||10,o.bodyA,o.bodyB),this.world.CreateJoint(o)}update(){console.time("Physics#update()");let t=Math.round(this.scene.game.loop.delta)/640;const e=Math.floor(Math.max(this.scene.game.loop.actualFps/3,2));this.world.Step(t,{positionIterations:e,velocityIterations:e}),this.world.ClearForces();const s=this.scene.cameras.main.scrollX-450,i=this.worldScale;for(let t=this.world.GetBodyList();t;t=t.GetNext()){if(!t)continue;let e=t.GetUserData();if(e){let{x:s,y:a}=t.GetPosition();e.setPosition(s*i,a*i),e.setRotation(t.GetAngle())}else for(let e=t.GetFixtureList();e;e=e.GetNext()){const a=e.GetShape();this.isChain(a)&&a.m_vertices[a.m_vertices.length-1].x*i<s&&t.DestroyFixture(e)}}console.timeEnd("Physics#update()")}isEdge(t){return t.GetType()===a.b2ShapeType.e_edge}isChain(t){return t.GetType()===a.b2ShapeType.e_chain}isPolygon(t){return t.GetType()===a.b2ShapeType.e_polygon}isCircle(t){return t.GetType()===a.b2ShapeType.e_circle}BeginContact(t){this.emit("begin-contact",t)}EndContact(t){this.emit("end-contact",t)}PreSolve(t,e){this.emit("pre-solve",t,e)}PostSolve(t,e){this.emit("post-solve",t,e)}}class l{constructor(t){this.scene=t;const{width:e,height:s}=this.scene.cameras.main;this.bgSpaceBack=this.scene.add.tileSprite(0,0,e,s,"space-back").setOrigin(0).setScrollFactor(0,0),this.bgSpaceMid=this.scene.add.tileSprite(0,0,e,s,"space-mid").setOrigin(0).setScrollFactor(0,0),this.bgSpaceFront=this.scene.add.tileSprite(0,0,e,s,"space-front").setOrigin(0).setScrollFactor(0,0),this.bgLandscapeMountains=this.scene.add.tileSprite(0,0,e,s,"bg-landscape-4-mountain").setZ(2).setScale(1.25,2).setOrigin(0,.5).setScrollFactor(0,0).setTint(30,30,30,30),this.bgLandscapeHills=this.scene.add.tileSprite(0,0,e,s,"bg-landscape-3-trees").setScale(1.25,1.5).setOrigin(0,.25).setScrollFactor(0,0).setZ(1).setTint(50,50,50,50)}update(){const{scrollX:t,scrollY:e}=this.scene.cameras.main;this.bgSpaceBack.setTilePosition(.001*t,.001*e),this.bgSpaceMid.setTilePosition(.0025*t,.0025*e),this.bgSpaceFront.setTilePosition(.005*t,.005*e),this.bgLandscapeMountains.setTilePosition(.025*t,0),this.bgLandscapeHills.setTilePosition(.035*t,0)}}class d extends i.Scene{constructor(){super({key:"GameScene"})}create(){return t=this,e=void 0,i=function*(){this.music=this.sound.add("theme"),this.music.play({loop:!0,volume:.5,rate:.9,delay:1.25}),this.b2Physics=new c(this,15,new a.b2Vec2(0,9.8)),this.backdrop=new l(this),this.terrainSimple=new o(this,this.b2Physics),this.wickedSnowman=new h(this,this.b2Physics);const t=this.cameras.main.worldView.x+this.cameras.main.width/2,e=this.cameras.main.worldView.y+this.cameras.main.height/2;this.add.text(t+50,e-200,"WICKED SNOWMAN").setScrollFactor(.35).setFontSize(40).setOrigin(.5),this.add.text(t+50,e-100,"Don't lose your head").setScrollFactor(.35).setFontSize(25).setOrigin(.5),this.add.text(t-35,e-62.5," ↑  jump").setScrollFactor(.35).setFontSize(20).setOrigin(0),this.add.text(t-35,e-37.5,"← → control").setScrollFactor(.35).setFontSize(20).setOrigin(0),this.playAgainButton=this.add.text(t,e,"PLAY AGAIN?").setScrollFactor(0).setFontSize(25).setOrigin(.5).setPadding(12).setAlpha(0).setStyle({backgroundColor:"#223B7B"}).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.restartGame())).on("pointerover",(()=>this.playAgainButton.setStyle({fill:"#5c8dc9"}))).on("pointerout",(()=>this.playAgainButton.setStyle({fill:"#FFF"}))),this.textDistance=this.add.text(12,12,"Travelled: 0m").setScrollFactor(0,0).setFontSize(16),this.textDistance.setShadow(1,1,"#000000",2),this.cameras.main.startFollow(this.wickedSnowman.body.GetUserData(),!1,.8,.25),this.cameras.main.followOffset.set(-375,0),this.cameras.main.setDeadzone(50,125),this.cameras.main.setBackgroundColor(0),this.cameras.main.setZoom(1,1)},new((s=void 0)||(s=Promise))((function(a,n){function o(t){try{h(i.next(t))}catch(t){n(t)}}function r(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}h((i=i.apply(t,e||[])).next())}));var t,e,s,i}restartGame(){this.music.stop(),this.scene.restart()}update(){this.wickedSnowman.isCrashed&&!this.playAgainButton.alpha&&(this.playAgainButton.setAlpha(1),this.tweens.add({targets:this.music,volume:0,detune:-500,rate:.5,duration:3e3,onComplete:t=>this.music.stop()})),this.wickedSnowman.isCrashed||(this.metersTravelled=Math.floor(this.wickedSnowman.body.GetPosition().Length()/2),this.textDistance.setText("Travelled: "+this.metersTravelled+"m")),this.backdrop.update(),this.wickedSnowman.update(),this.terrainSimple.update(),this.b2Physics.update()}}class y extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.audio("theme",["assets/audio/theme/theme.ogg","assets/audio/theme/theme.mp3","assets/audio/theme/theme.aac"]),this.load.image("space-back","assets/img/bgSpace/bg_space_seamless.png"),this.load.image("space-mid","assets/img/bgSpace/bg_space_seamless_fl1.png"),this.load.image("space-front","assets/img/bgSpace/bg_space_seamless_fl2.png"),this.load.image("bg-landscape-3-trees","assets/img/bgLandscape/landscape_0002_3_trees.png"),this.load.image("bg-landscape-4-mountain","assets/img/bgLandscape/landscape_0003_4_mountain.png")}create(){this.scene.start("GameScene")}}const g={type:i.WEBGL,backgroundColor:"#ffffff",disableContextMenu:!0,fps:{min:55,target:60,smoothStep:!0},scale:{parent:"phaser-wrapper",mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH,width:960,height:540},scene:[y,d]};window.addEventListener("load",(()=>{new i.Game(g)}))}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,i),n.exports}i.m=e,t=[],i.O=(e,s,a,n)=>{if(!s){var o=1/0;for(l=0;l<t.length;l++){for(var[s,a,n]=t[l],r=!0,h=0;h<s.length;h++)(!1&n||o>=n)&&Object.keys(i.O).every((t=>i.O[t](s[h])))?s.splice(h--,1):(r=!1,n<o&&(o=n));if(r){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[s,a,n]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,n,[o,r,h]=s,c=0;if(o.some((e=>0!==t[e]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(h)var l=h(i)}for(e&&e(s);c<o.length;c++)n=o[c],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(l)},s=self.webpackChunkwicked_snowman=self.webpackChunkwicked_snowman||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=i.O(void 0,[216],(()=>i(1440)));a=i.O(a)})();