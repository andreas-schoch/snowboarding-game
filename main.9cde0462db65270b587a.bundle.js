(()=>{"use strict";var e,t={5575:(e,t,s)=>{s.d(t,{u:()=>d});var a=s(2260),i=s(3875),o=s(6479),r=s.n(o);const n={startTerrainHeight:.5,slopeAmplitude:400,slopeLengthRange:[750,1500],worldScale:30,layers:[]};class l{constructor(e,t,s=n){this.scene=e,this.world=t,this.config=s,this.chunks=[this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics(),this.scene.add.graphics()],this.terrainBody=this.world.createBody(),this.slopeStart=new Phaser.Math.Vector2(0,0),this.generateTerrain()}update(){this.generateTerrain()}interpolate(e,t,s){let a=.5*(1-Math.cos(s*Math.PI));return e*(1-a)+t*a}generateTerrain(){for(;this.slopeStart.x<this.scene.cameras.main.worldView.x+this.scene.cameras.main.width+500;)console.time("TerrainSimple#generateSlope()"),this.generateSlope(),console.timeEnd("TerrainSimple#generateSlope()")}generateSlope(){let e=[],t=new Phaser.Math.Vector2(0,this.slopeStart.y),s=Phaser.Math.Between(n.slopeLengthRange[0],n.slopeLengthRange[1]);s=200*Math.floor(s/200),s=Math.min(Math.max(s,this.config.slopeLengthRange[0]),this.config.slopeLengthRange[1]);const i=(this.config.slopeLengthRange[1],.75);let o=0===this.slopeStart.x?{x:t.x+1.5*n.slopeLengthRange[1],y:0}:{x:t.x+s,y:Math.random()*i},l=0;for((new a.Display.Color).random();l<=o.x;){let s=this.interpolate(t.y,o.y,(l-t.x)/(o.x-t.x)),a=d.scale.height*n.startTerrainHeight+s*n.slopeAmplitude;e.push(new Phaser.Math.Vector2(l,a)),l++}this.slopePoints=r()(e,1,!1);const{worldScale:c}=this.config,h=this.chunks.shift();if(h){this.chunks.push(h),h.clear();for(const{color:e,width:t}of this.config.layers)h.moveTo(this.slopeStart.x,2*d.scale.height),h.fillStyle(e),h.beginPath(),this.slopePoints.forEach((e=>h.lineTo(e.x+this.slopeStart.x,e.y+t))),h.lineTo(this.slopePoints[this.slopePoints.length-1].x+this.slopeStart.x,2*d.scale.height),h.lineTo(this.slopeStart.x,2*d.scale.height),h.closePath(),h.fillPath();h.lineStyle(10,13165035),h.beginPath(),this.slopePoints.forEach((e=>h.lineTo(e.x+this.slopeStart.x,e.y))),h.strokePath(),this.slopeStart.x+=l-1,this.slopeStart.y=o.y}}isEdge(e){return Boolean(e.m_vertex1)}cleanupTerrainFixtures(){for(let e=this.world.getBodyList();e;e=e.getNext())for(let t=e.getFixtureList();t;t=t.getNext()){const s=t.getShape();this.isEdge(s)&&s.m_vertex2.x*n.worldScale<this.scene.cameras.main.scrollX-900&&e.destroyFixture(t)}}}class c extends a.Scene{constructor(){super({key:"GameScene"})}create(){return e=this,t=void 0,a=function*(){const{width:e,height:t}=d.scale;this.backgroundBack=this.add.tileSprite(0,0,e,t,"space-back").setOrigin(0).setScrollFactor(0,0),this.backgroundMid=this.add.tileSprite(0,0,e,t,"space-mid").setOrigin(0).setScrollFactor(0,0),this.backgroundFront=this.add.tileSprite(0,0,e,t,"space-front").setOrigin(0).setScrollFactor(0,0),this.bgLandscapeMountains=this.add.tileSprite(0,0,e,t,"bg-landscape-4-mountain").setZ(2).setScale(1.25,2).setOrigin(0,.5).setScrollFactor(0,0).setTint(30,30,30,30),this.bgLandscapeHills=this.add.tileSprite(0,0,e,t,"bg-landscape-3-trees").setScale(1.25,1.5).setOrigin(0,.25).setScrollFactor(0,0).setZ(1).setTint(50,50,50,50),this.bgLandscapeClouds=this.add.tileSprite(0,0,e,t,"bg-landscape-5-clouds").setOrigin(0,.3).setScrollFactor(0,0).setZ(1),this.textFPS=this.add.text(this.cameras.main.worldView.x+this.cameras.main.width-24,24,"").setScrollFactor(0).setFontSize(32).setOrigin(1,0),this.textFPS.setShadow(1,1,"#000000",2),setInterval((()=>this.textFPS.setText(`fps: ${this.game.loop.actualFps.toFixed(1)} (${this.game.loop.targetFps})`)),1e3),this.music=this.sound.add("nightmare"),setTimeout((()=>this.music.play({loop:!0,volume:.5,detune:0,rate:1})),1250),this.worldScale=30;let s=i.Vec2(0,9.8);this.world=i.World(s),this.terrainSimple=new l(this,this.world);const a=this.cameras.main.worldView.x+this.cameras.main.width/2,o=this.cameras.main.worldView.y+this.cameras.main.height/2;this.add.text(a+100,o-400,"WICKED SNOWMAN").setScrollFactor(.35).setFontSize(80).setOrigin(.5),this.add.text(a+100,o-200,"Don't lose your head").setScrollFactor(.35).setFontSize(50).setOrigin(.5),this.add.text(a-70,o-125," ↑  jump").setScrollFactor(.35).setFontSize(40).setOrigin(0),this.add.text(a-70,o-75,"← → control").setScrollFactor(.35).setFontSize(40).setOrigin(0),this.playAgainButton=this.add.text(a,o,"PLAY AGAIN?").setScrollFactor(0).setFontSize(50).setOrigin(.5).setPadding(24).setAlpha(0).setStyle({backgroundColor:"#223B7B",border:"5px solid red"}).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.restartGame())).on("pointerover",(()=>this.playAgainButton.setStyle({fill:"#5c8dc9"}))).on("pointerout",(()=>this.playAgainButton.setStyle({fill:"#FFF"}))),this.textDistance=this.add.text(24,24,"Travelled: 0m").setScrollFactor(0,0).setFontSize(32),this.textDistance.setShadow(1,1,"#000000",2),this.rock=this.add.sprite(0,400,"rock"),this.cameras.main.startFollow(this.rock,!1,.8,.25),this.cameras.main.followOffset.set(-750,0),this.cameras.main.setDeadzone(100,250),this.cameras.main.setBackgroundColor(0),this.cameras.main.setZoom(1,1)},new((s=void 0)||(s=Promise))((function(i,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function n(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,n)}l((a=a.apply(e,t||[])).next())}));var e,t,s,a}restartGame(){this.music.stop(),this.scene.restart()}update(){console.time("GameScene#update()"),this.rock.setPosition(this.rock.x+30,this.rock.y),this.backgroundBack.setTilePosition(.001*this.cameras.main.scrollX,.001*this.cameras.main.scrollY),this.backgroundMid.setTilePosition(.0025*this.cameras.main.scrollX,.0025*this.cameras.main.scrollY),this.backgroundFront.setTilePosition(.005*this.cameras.main.scrollX,.005*this.cameras.main.scrollY),this.bgLandscapeClouds.setTilePosition(.25*this.cameras.main.scrollX,.25*this.cameras.main.scrollY),this.bgLandscapeMountains.setTilePosition(.025*this.cameras.main.scrollX,0),this.bgLandscapeHills.setTilePosition(.035*this.cameras.main.scrollX,0),this.terrainSimple.update(),console.timeEnd("GameScene#update()")}updatePhysics(){console.time("GameScene#updatePhysics()"),this.world.step(1/40,15,15),this.world.clearForces();for(let e=this.world.getBodyList();e;e=e.getNext()){if(!e)continue;let t=e.getUserData();if(!t)continue;let s=e.getPosition();t.x=s.x*this.worldScale,t.y=s.y*this.worldScale,t.rotation=e.getAngle()}console.timeEnd("GameScene#updatePhysics()")}}class h extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.audio("nightmare",["assets/audio/nightmare/nightmarechipheavy.mp3","assets/audio/nightmare/nightmarechipheavy.ogg","assets/audio/nightmare/nightmarechipheavy.aac"]),this.load.image("space-back","assets/img/bgSpace/bg_space_seamless.png"),this.load.image("space-mid","assets/img/bgSpace/bg_space_seamless_fl1.png"),this.load.image("space-front","assets/img/bgSpace/bg_space_seamless_fl2.png"),this.load.image("bg-landscape-1-trees","assets/img/bgLandscape/landscape_0000_1_trees.png"),this.load.image("bg-landscape-2-trees","assets/img/bgLandscape/landscape_0001_2_trees.png"),this.load.image("bg-landscape-3-trees","assets/img/bgLandscape/landscape_0002_3_trees.png"),this.load.image("bg-landscape-4-mountain","assets/img/bgLandscape/landscape_0003_4_mountain.png"),this.load.image("bg-landscape-5-clouds","assets/img/bgLandscape/landscape_0004_5_clouds.png"),this.load.image("bg-landscape-6-back","assets/img/bgLandscape/landscape_0005_6_background.png")}create(){this.scene.start("GameScene")}}const d={type:Phaser.WEBGL,backgroundColor:"#ffffff",disableContextMenu:!0,fps:{min:55,target:60,smoothStep:!0},scale:{parent:"phaser-wrapper",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1920,height:1080},scene:[h,c]};window.addEventListener("load",(()=>{new Phaser.Game(d)}))}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,s,i,o)=>{if(!s){var r=1/0;for(h=0;h<e.length;h++){for(var[s,i,o]=e[h],n=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](s[l])))?s.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(h--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[s,i,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,o,[r,n,l]=s,c=0;if(r.some((t=>0!==e[t]))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(l)var h=l(a)}for(t&&t(s);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[r[c]]=0;return a.O(h)},s=self.webpackChunkwicked_snowman=self.webpackChunkwicked_snowman||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=a.O(void 0,[216],(()=>a(5575)));i=a.O(i)})();