(()=>{"use strict";var e,t={2812:(e,t,i)=>{i.d(t,{u:()=>u});var o=i(2260),r=i(3875),s=i(6479),a=i.n(s);const l={startTerrainHeight:.5,slopeAmplitude:500,slopeLengthRange:[800,2e3],worldScale:30};class n{constructor(e,t,i=l){this.scene=e,this.world=t,this.config=i,this.debugGraphics=this.scene.add.graphics(),this.terrainGraphics=this.scene.add.graphics(),this.terrainBody=this.world.createBody(),this.slopeStart=new Phaser.Math.Vector2(0,0),this.generateTerrain()}update(){this.generateTerrain(),this.debugDraw()}interpolate(e,t,i){let o=.5*(1-Math.cos(i*Math.PI));return e*(1-o)+t*o}generateTerrain(){for(;this.slopeStart.x<this.scene.cameras.main.scrollX+u.scale.width;)this.generateSlope()}generateSlope(){let e=[],t=new Phaser.Math.Vector2(0,this.slopeStart.y),i=Phaser.Math.Between(l.slopeLengthRange[0],l.slopeLengthRange[1]);i=200*Math.floor(i/200),i=Math.min(Math.max(i,this.config.slopeLengthRange[0]),this.config.slopeLengthRange[1]);let o=0===this.slopeStart.x?{x:t.x+1.5*l.slopeLengthRange[1],y:0}:{x:t.x+i,y:Math.random()},s=0;for(;s<=o.x;){let i=this.interpolate(t.y,o.y,(s-t.x)/(o.x-t.x)),r=u.scale.height*l.startTerrainHeight+i*l.slopeAmplitude;e.push(new Phaser.Math.Vector2(s,r)),s++}e=a()(e,1,!1);const n={density:0,friction:0},{worldScale:c}=this.config;for(let t=1;t<e.length;t++)this.terrainBody.createFixture(r.Edge(r.Vec2((e[t-1].x+this.slopeStart.x)/c,e[t-1].y/c),r.Vec2((e[t].x+this.slopeStart.x)/c,e[t].y/c)),n);this.slopeStart.x+=s-1,this.slopeStart.y=o.y}debugDraw(){this.debugGraphics.clear();for(let e=this.world.getBodyList();e;e=e.getNext())for(let t=e.getFixtureList();t;t=t.getNext()){let i=t.getShape();switch(t.getType()){case"edge":{this.debugGraphics.lineStyle(4,16711935);let o=i.m_vertex1,r=i.m_vertex2;r.x*l.worldScale<this.scene.cameras.main.scrollX?e.destroyFixture(t):(this.debugGraphics.beginPath(),this.debugGraphics.moveTo(o.x*l.worldScale,o.y*l.worldScale),this.debugGraphics.lineTo(r.x*l.worldScale,r.y*l.worldScale),this.debugGraphics.strokePath());break}}}}}class c{constructor(e,t,i){this.scene=e,this.world=t,this.worldScale=i}create(){return e=this,t=void 0,s=function*(){this.cursors=this.scene.input.keyboard.createCursorKeys(),this.cursors=this.scene.input.keyboard.addKeys({up:Phaser.Input.Keyboard.KeyCodes.W,down:Phaser.Input.Keyboard.KeyCodes.S,left:Phaser.Input.Keyboard.KeyCodes.A,right:Phaser.Input.Keyboard.KeyCodes.D,space:Phaser.Input.Keyboard.KeyCodes.SPACE,shift:Phaser.Input.Keyboard.KeyCodes.SHIFT});const e=16.8,t=6.720000000000001,i=300,s=this.createBox(716.8,i,0,e,t,!0,4634313),a=this.createBox(733.6,i,0,e,t,!0,4634313),l=this.createBox(750.4,i,0,e,t,!0,4634313),n=this.createBox(767.2,i,0,e,t,!0,4634313),c=this.createBox(784,i,0,e,t,!0,4634313);this.board=c;const h=this.createBox(800.8,i,0,e,t,!0,4634313),d=this.createBox(817.6,i,0,e,t,!0,4634313),u=this.createBox(834.4,i,0,e,t,!0,4634313),w=this.createBox(851.2,i,0,e,t,!0,4634313),g=this.createBox(868,i,0,e,t,!0,4634313),p=r.Vec2((708.4+16.8)/this.worldScale,i/this.worldScale),y=r.Vec2(742/this.worldScale,i/this.worldScale),m=r.Vec2(758.8/this.worldScale,i/this.worldScale),S=r.Vec2(775.6/this.worldScale,i/this.worldScale),f=r.Vec2(792.4/this.worldScale,i/this.worldScale),x=r.Vec2(809.2/this.worldScale,i/this.worldScale),b=r.Vec2(826/this.worldScale,i/this.worldScale),V=r.Vec2(842.8/this.worldScale,i/this.worldScale),v=r.Vec2(859.6/this.worldScale,i/this.worldScale);this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:5,referenceAngle:-.35},s,a,p)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:5,referenceAngle:-.25},a,l,y)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:6},l,n,m)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:8},n,c,S)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:12},c,h,f)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:8},h,d,x)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:6},d,u,b)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:5,referenceAngle:-.25},u,w,V)),this.world.createJoint(r.WeldJoint({dampingRatio:.5,frequencyHz:5,referenceAngle:-.35},w,g,v));const P=30,J=21,R=21,D=r.Vec2(792.4,225),L=this.createCircle(D.x,D.y-P-21,0,21,!0);this.body=this.createCircle(D.x,D.y,0,P,!0);const B=this.body.getWorldPoint(r.Vec2(0,-1).mul(P/this.worldScale));this.world.createJoint(r.RevoluteJoint({lowerAngle:-.1,upperAngle:.1,enableLimit:!0},L,this.body,B));const A=new o.Math.Vector2(0,1).rotate(.5),W=this.body.getWorldPoint(r.Vec2(A.x,A.y).mul(42/this.worldScale)).mul(this.worldScale),M=this.createBox(W.x,W.y,.5,9,J,!0),C=this.body.getWorldPoint(r.Vec2(A.x,A.y).mul(P/this.worldScale));this.world.createJoint(r.RevoluteJoint({lowerAngle:-.2,upperAngle:1,enableLimit:!0},this.body,M,C));const H=new o.Math.Vector2(0,1).rotate(-.25),k=r.Vec2(M.getWorldPoint(r.Vec2(H.x,H.y).mul(J/this.worldScale))).mul(this.worldScale),q=this.createBox(k.x,k.y,0,9,J,!0),z=r.Vec2(k).add(r.Vec2(0,-10.5)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({lowerAngle:-1.5,upperAngle:.375,enableLimit:!0},M,q,z));const I=r.Vec2(k).add(r.Vec2(0,10.5)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({},q,n,I));const F=new o.Math.Vector2(0,1).rotate(-.5),T=this.body.getWorldPoint(r.Vec2(F.x,F.y).mul(42/this.worldScale)).mul(this.worldScale),j=this.createBox(T.x,T.y,-.5,9,J,!0),K=this.body.getWorldPoint(r.Vec2(F.x,F.y).mul(P/this.worldScale));this.world.createJoint(r.RevoluteJoint({lowerAngle:-1,upperAngle:.2,enableLimit:!0},this.body,j,K));const O=new o.Math.Vector2(0,1).rotate(.25),G=r.Vec2(j.getWorldPoint(r.Vec2(O.x,O.y).mul(J/this.worldScale))).mul(this.worldScale),E=this.createBox(G.x,G.y,0,9,J,!0),_=r.Vec2(G).add(r.Vec2(0,-10.5)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({lowerAngle:-.375,upperAngle:1.5,enableLimit:!0},j,E,_));const N=r.Vec2(G).add(r.Vec2(0,10.5)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({},E,d,N)),this.jointDistLeft=this.world.createJoint(r.DistanceJoint({length:48/this.worldScale,frequencyHz:15,dampingRatio:10},this.body,d,C,I)),this.jointDistRight=this.world.createJoint(r.DistanceJoint({length:48/this.worldScale,frequencyHz:15,dampingRatio:10},this.body,n,K,N));const U=Math.PI/180*90,X=new o.Math.Vector2(-1,0).rotate(.5),Q=this.body.getWorldPoint(r.Vec2(X.x,X.y).mul(42/this.worldScale)).mul(this.worldScale),Y=this.createBox(Q.x,Q.y,U+.5,9,R,!0),Z=this.body.getWorldPoint(r.Vec2(X.x,X.y).mul(P/this.worldScale));this.world.createJoint(r.RevoluteJoint({lowerAngle:-1.25,upperAngle:.75,enableLimit:!0},this.body,Y,Z));const $=new o.Math.Vector2(0,1).rotate(0),ee=r.Vec2(Y.getWorldPoint(r.Vec2($.x,$.y).mul(R/this.worldScale))).mul(this.worldScale),te=this.createBox(ee.x,ee.y,U+.5,9,R,!0),ie=r.Vec2(ee).add(r.Vec2(12,0)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({lowerAngle:-.75,upperAngle:.75,enableLimit:!0},Y,te,ie));const oe=-Math.PI/180*90,re=-.5,se=new o.Math.Vector2(1,0).rotate(re),ae=this.body.getWorldPoint(r.Vec2(se.x,se.y).mul(42/this.worldScale)).mul(this.worldScale),le=this.createBox(ae.x,ae.y,oe+re,9,R,!0),ne=this.body.getWorldPoint(r.Vec2(se.x,se.y).mul(P/this.worldScale));this.world.createJoint(r.RevoluteJoint({lowerAngle:-.75,upperAngle:1.25,enableLimit:!0},this.body,le,ne));const ce=new o.Math.Vector2(0,1).rotate(0),he=r.Vec2(le.getWorldPoint(r.Vec2(ce.x,ce.y).mul(R/this.worldScale))).mul(this.worldScale),de=this.createBox(he.x,he.y,oe+re,9,R,!0),ue=r.Vec2(he).add(r.Vec2(-12,0)).mul(1/this.worldScale);this.world.createJoint(r.RevoluteJoint({lowerAngle:-.75,upperAngle:.75,enableLimit:!0},le,de,ue))},new((i=void 0)||(i=Promise))((function(o,r){function a(e){try{n(s.next(e))}catch(e){r(e)}}function l(e){try{n(s.throw(e))}catch(e){r(e)}}function n(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}n((s=s.apply(e,t||[])).next())}));var e,t,i,s}createBox(e,t,i,o,s,a,l=11962192){const n=this.world.createBody({angle:i,linearDamping:.15,angularDamping:.1});a&&n.setDynamic(),n.createFixture(r.Box(o/2/this.worldScale,s/2/this.worldScale),{friction:.001,restitution:.005,density:.1}),n.setPosition(r.Vec2(e/this.worldScale,t/this.worldScale)),n.setMassData({mass:.5,center:r.Vec2(),I:1});let c=this.scene.add.graphics();return c.fillStyle(l),c.fillRect(-o/2,-s/2,o,s),n.setUserData(c),n}createCircle(e,t,i,o,s,a=15981044){const l=this.world.createBody({angle:i/360*Math.PI,linearDamping:.15,angularDamping:.2});s&&l.setDynamic(),l.createFixture(r.Circle(o/this.worldScale),{friction:.5,restitution:.1,density:1}),l.setPosition(r.Vec2(e/this.worldScale,t/this.worldScale)),l.setMassData({mass:1,center:r.Vec2(),I:1});const n=this.scene.add.graphics();return n.fillStyle(a),n.fillCircle(0,0,o),l.setUserData(n),l}setDistanceLegs(e,t){var i,o,r,s,a,l;if(this.jointDistLeft&&e){const{length:t,frequencyHz:s,dampingRatio:a}=e;t&&(null===(i=this.jointDistLeft)||void 0===i||i.setLength(.6*t)),s&&(null===(o=this.jointDistLeft)||void 0===o||o.setFrequency(s)),a&&(null===(r=this.jointDistLeft)||void 0===r||r.setDampingRatio(a))}if(this.jointDistRight&&t){const{length:e,frequencyHz:i,dampingRatio:o}=t;e&&(null===(s=this.jointDistRight)||void 0===s||s.setLength(.6*e)),i&&(null===(a=this.jointDistRight)||void 0===a||a.setFrequency(i)),o&&(null===(l=this.jointDistRight)||void 0===l||l.setDampingRatio(o))}}update(){if(this.cursors.left.isDown&&(this.body.applyAngularImpulse(-3.5),this.setDistanceLegs({length:60/this.worldScale},{length:80/this.worldScale})),this.cursors.right.isDown&&(this.body.applyAngularImpulse(3.5),this.setDistanceLegs({length:80/this.worldScale},{length:60/this.worldScale})),this.cursors.space.isDown){this.setDistanceLegs({length:80/this.worldScale,dampingRatio:.1,frequencyHz:6},{dampingRatio:.1,frequencyHz:6,length:80/this.worldScale});const e=this.body.getWorldVector(r.Vec2(0,-50)).add(r.Vec2(0,-100));this.body.applyForceToCenter(e,!0)}this.cursors.up.isDown&&this.setDistanceLegs({length:80/this.worldScale,dampingRatio:.2,frequencyHz:10},{dampingRatio:.2,frequencyHz:10,length:80/this.worldScale}),this.board.applyForceToCenter(r.Vec2(30,0),!0),this.body.applyForceToCenter(r.Vec2(30,0),!0),this.cursors.down.isDown&&this.setDistanceLegs({length:50/this.worldScale},{length:50/this.worldScale})}}class h extends o.Scene{constructor(){super({key:"GameScene"})}create(){return e=this,t=void 0,o=function*(){this.sound.add("theme").play({loop:!0}),this.worldScale=30;let e=r.Vec2(0,4);this.world=r.World(e),this.terrainSimple=new n(this,this.world),this.wickedSnowman=new c(this,this.world,this.worldScale),this.wickedSnowman.create(),this.cameras.main.startFollow(this.wickedSnowman.body.getUserData(),!1,.8,.25),this.cameras.main.followOffset.set(-300,0),this.cameras.main.setDeadzone(0,150),this.cameras.main.setBackgroundColor(0)},new((i=void 0)||(i=Promise))((function(r,s){function a(e){try{n(o.next(e))}catch(e){s(e)}}function l(e){try{n(o.throw(e))}catch(e){s(e)}}function n(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}n((o=o.apply(e,t||[])).next())}));var e,t,i,o}update(){this.wickedSnowman.update(),this.terrainSimple.update(),this.updatePhysics(),this.world.step(1/60),this.world.clearForces()}updatePhysics(){this.world.step(1/40,10,8),this.world.clearForces();for(let e=this.world.getBodyList();e;e=e.getNext()){if(!e)continue;let t=e.getUserData();if(!t)continue;let i=e.getPosition();t.x=i.x*this.worldScale,t.y=i.y*this.worldScale,t.rotation=e.getAngle()}}}class d extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.audio("theme",["assets/audio/theme.ogg","assets/audio/theme.aac","assets/audio/theme.mp3"])}create(){this.scene.start("GameScene")}}const u={type:Phaser.WEBGL,backgroundColor:"#ffffff",scale:{parent:"phaser-wrapper",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1920,height:1080},scene:[d,h]};window.addEventListener("load",(()=>{new Phaser.Game(u)}))}},i={};function o(e){var r=i[e];if(void 0!==r)return r.exports;var s=i[e]={exports:{}};return t[e].call(s.exports,s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,i,r,s)=>{if(!i){var a=1/0;for(h=0;h<e.length;h++){for(var[i,r,s]=e[h],l=!0,n=0;n<i.length;n++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](i[n])))?i.splice(n--,1):(l=!1,s<a&&(a=s));if(l){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,r,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,i)=>{var r,s,[a,l,n]=i,c=0;if(a.some((t=>0!==e[t]))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(n)var h=n(o)}for(t&&t(i);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[a[c]]=0;return o.O(h)},i=self.webpackChunkwicked_snowman=self.webpackChunkwicked_snowman||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=o.O(void 0,[216],(()=>o(2812)));r=o.O(r)})();